# Task 2: Training code

Как мы будем проверять вашу работу (обобщённые шаги):
1. клонируем репозиторий
2. создаём новый чистый virtualenv (по инструкции)
3. устанавливаем зависимости (по инструкции)
4. `pre-commit install` - ожидаем успешную установку
5. `pre-commit run -a` - ожидаем успешный результат
6. запускаем тренировку - также ожидаем успех и снижение лосса

Ниже описаны обязательные части вашего проекта: файлы и описание требований к основным этапам работы.

## Dependencies (10 баллов) *

* uv
* pyproject.toml
* 

## Code quality tools (10 баллов) *

* Необходимо использовать pre-commit c базовыми хуками pre-commit, ruff, prettier (для не Python файлов).
* Все хуки должны быть соответствующе настроены в pyproject.toml
* Также необходимо, чтобы запуск pre-commit run -a не выдавал ошибок (зелёные результаты).

## Training framework (15 баллов) *

* PyTorch Lightning

## Data management (10 баллов) *

* Необходимо использовать dvc для хранения данных.
* Yandex Disc
* Скачивание данных с помощью dvc необходимо встроить в имеющиеся команды train и infer, для этого у dvc есть python api

## Hydra (10 баллов) *

* Переведите основные гиперпараметры препроцессинга, обучения и постпроцессинга в yaml конфиги hydra. Сами конфиги лучше всего расположить в папке configs в корне репозитория.
* Используйте иерархические конфиги.
* В коде не должно быть магических констант. Их можно вынести либо в отдельный Python файл (если они глобальные и их не предполагается менять), либо под управление hydra.

## Logging (10 баллов) *

* Необходимо добавить логирование ваших основных метрик и функций потерь (всего не менее 3 графиков). Также в эксперимент записывать использованные гиперпараметры и версию кода (git commit id). Считайте, что сервер mlflow уже поднят по адресу 127.0.0.1:8080 (вы можете поднимать его локально для тестов по этому же адресу). Адрес добавьте в поле конфига.

## Что делать желательно (+2 балла)
* Под вызовом if __name__ == '__main__': лучше вызывать ровно одну функцию (можно её назвать main или как-то ещё), а не писать всю логику непосредственно под if-ом.
* Использовать fire совместно с hydra через compose api
* Сделать одну входную точку commands.py, где вызывать соответствующие функции из файлов
* Используйте pathlib вместо os.path - важа жизнь заиграет совершенно другими красками )
